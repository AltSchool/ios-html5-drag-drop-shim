/*! drag-drop-webkit-mobile 2.0.0 | Copyright (c) 2016 Tim Ruffles | BSD 2 License */
var MobileDragAndDropPolyfill;!function(a){function b(){var a={dragEvents:"ondragstart"in document.documentElement,draggable:"draggable"in document.documentElement,isBlinkEngine:!!window.chrome||/chrome/i.test(navigator.userAgent),touchEvents:"ontouchstart"in document.documentElement,transitionEnd:"WebkitTransition"in document.documentElement.style?"webkitTransitionEnd":"transitionend",userAgentNotSupportingNativeDnD:!1};return a.userAgentNotSupportingNativeDnD=/iPad|iPhone|iPod|Android/.test(navigator.userAgent)||a.touchEvents&&a.isBlinkEngine,a}function c(a){u=b(),u.userAgentNotSupportingNativeDnD===!1&&u.draggable&&u.dragEvents||(a&&Object.keys(a).forEach(function(b){v[b]=a[b]}),document.addEventListener("touchstart",d))}function d(a){if(!w){var b=e(a);if(b)try{w=new E(a,v,b,f)}catch(c){throw f(v,a,3),c}}}function e(a){var b=a.target;do if(b.draggable!==!1&&b.getAttribute&&"true"===b.getAttribute("draggable"))return b;while((b=b.parentNode)&&b!==document.body)}function f(a,b,c){if(0===c){var d=!1;if("touchmove"===b.type)d=!0;else if(a.defaultActionOverride)try{d=a.defaultActionOverride(b)}catch(e){}if(d===!1){b.preventDefault();var f=0===b.touches.length&&1===b.changedTouches.length;if(f){var g,h=b.target,i=h.tagName;switch(i){case"SELECT":case"TEXTAREA":h.focus();break;default:g="click"}if(g){var k=j(h,b,g);h.dispatchEvent(k)}}}}w=null}function g(a){return 0===a.length?0:a.reduce(function(a,b){return b+a},0)/a.length}function h(a){return a&&a.tagName}function i(a,b){for(var c=0;c<a.changedTouches.length;c++){var d=a.changedTouches[c];if(d.identifier===b)return!0}return!1}function j(a,b,c,d,e,f){void 0===d&&(d=!0),void 0===e&&(e=document.defaultView),void 0===f&&(f=null);var g=b.changedTouches[0],h=document.createEvent("MouseEvents");h.initMouseEvent(c,!0,d,e,1,g.screenX,g.screenY,g.clientX,g.clientY,b.ctrlKey,b.altKey,b.shiftKey,b.metaKey,0,f),h.pageX=g.pageX,h.pageY=g.pageY;var i=a.getBoundingClientRect();return h.offsetX=h.clientX-i.left,h.offsetY=h.clientY-i.top,h}function k(a,b,c,d,e,f,g){void 0===g&&(g=null);var h=b.changedTouches[0],i=document.createEvent("Event");i.initEvent(c,!0,d),i.dataTransfer=f,i.relatedTarget=g,i.screenX=h.screenX,i.screenY=h.screenY,i.clientX=h.clientX,i.clientY=h.clientY,i.pageX=h.pageX,i.pageY=h.pageY;var j=a.getBoundingClientRect();return i.offsetX=i.clientX-j.left,i.offsetY=i.clientY-j.top,i}function l(a,b,c){for(var d=[],e=[],f=0;f<b.touches.length;f++){var h=b.touches[f];d.push(h[a+"X"]),e.push(h[a+"Y"])}c.x=g(d),c.y=g(e)}function m(a,b){if(1===a.nodeType){for(var c=window.getComputedStyle(a),d=0;d<c.length;d++){var e=c[d];b.style.setProperty(e,c.getPropertyValue(e),c.getPropertyPriority(e))}b.style.pointerEvents="none",b.removeAttribute("id"),b.removeAttribute("class"),b.removeAttribute("draggable")}if(a.hasChildNodes())for(var d=0;d<a.childNodes.length;d++)m(a.childNodes[d],b.childNodes[d])}function n(a){var b=a.cloneNode(!0);return m(a,b),b.style.position="absolute",b.style.left="0px",b.style.top="0px",b.style.zIndex="999999",b.classList.add(B),b.classList.add(D),b}function o(a,b,c,d){void 0===d&&(d=!0);var e=b.x,f=b.y;c&&(e+=c.x,f+=c.y),d&&(e-=parseInt(a.offsetWidth,10)/2,f-=parseInt(a.offsetHeight,10)/2);for(var g="translate3d("+e+"px,"+f+"px, 0)",h=0;h<z.length;h++){var i=z[h]+"transform";a.style[i]=g}}function p(a,b,c){var d=window.getComputedStyle(a,null),e=d.getPropertyValue("visibility"),f=d.getPropertyValue("display");if("hidden"===e||"none"===f)return!1;var g=a.getBoundingClientRect(),h={x:g.left,y:g.top},i=q("scrollLeft"),j=q("scrollTop");h.x+=i,h.y+=j;var k=parseInt(d.getPropertyValue("margin-left"),10),l=parseInt(d.getPropertyValue("margin-top"),10);h.x-=k,h.y-=l,b.classList.add(C);var m=getComputedStyle(b,null),n=parseFloat(m.transitionDuration),p=parseFloat(m.transitionDelay),r=Math.round(1e3*(n+p));return o(b,h,void 0,!1),setTimeout(c,r),!0}function q(a){return document.body[a]||document.documentElement[a]}function r(a,b){return a?a===x[0]?y[0]:0===a.indexOf(x[1])||a===x[7]?y[1]:0===a.indexOf(x[4])?y[3]:a===x[6]?y[2]:y[1]:3===b.nodeType&&"A"===b.tagName?y[3]:y[1]}function s(a,b,c,d,e,f,g){void 0===f&&(f=!0),void 0===g&&(g=null);var h=k(b,c,a,f,document.defaultView,e,g),i=!b.dispatchEvent(h);return d.g=0,i}function t(a,b){if(!a||a===x[7])return b;if(b===y[1]){if(0===a.indexOf(y[1]))return y[1]}else if(b===y[3]){if(0===a.indexOf(y[3])||a.indexOf("Link")>-1)return y[3]}else if(b===y[2]&&(0===a.indexOf(y[2])||a.indexOf("Move")>-1))return y[2];return y[0]}var u,v={dragImageCenterOnTouch:!1,iterationInterval:150};a.Initialize=c;var w,x=["none","copy","copyLink","copyMove","link","linkMove","move","all"],y=["none","copy","move","link"],z=["","-webkit-"],A="dnd-poly-",B=A+"drag-image",C=A+"snapback",D=A+"icon",E=function(){function a(a,b,c,d){this.h=a,this.i=b,this.j=c,this.k=d,this.l=0,this.m=null,this.o=null,this.p=a,this.q=a.changedTouches[0],this.s=this.t.bind(this),this.u=this.v.bind(this),document.addEventListener("touchmove",this.s),document.addEventListener("touchend",this.u),document.addEventListener("touchcancel",this.u)}return a.prototype.A=function(){var a=this;this.l=1,this.B=y[0],this.C={D:{},F:void 0,g:3,G:[]},this.H={x:null,y:null},this.I={x:null,y:null};var b=this.j;if(this.J=new F(this.C,function(c,d,e){void 0===d&&(d=0),void 0===e&&(e=0),b=c,a.K={x:d,y:e}}),this.C.g=2,this.J.dropEffect=y[0],s("dragstart",this.j,this.p,this.C,this.J))return this.l=3,void this.L();if(l("page",this.p,this.I),this.M=n(b),!this.K)if(this.i.dragImageOffset)this.K={x:this.i.dragImageOffset.x,y:this.i.dragImageOffset.y};else if(this.i.dragImageCenterOnTouch)this.K={x:0,y:0};else{var c=this.q,d=b,e=d.getBoundingClientRect(),f=getComputedStyle(d,null),g=parseInt(f.getPropertyValue("margin-left"),10),h=parseInt(f.getPropertyValue("margin-top"),10);this.K={x:e.left-c.clientX-g,y:e.top-c.clientY-h}}o(this.M,this.I,this.K,this.i.dragImageCenterOnTouch),document.body.appendChild(this.M),this.N=setInterval(function(){a.O||(a.O=!0,a.P(),a.O=!1)},this.i.iterationInterval)},a.prototype.L=function(){this.N&&(clearInterval(this.N),this.N=null),document.removeEventListener("touchmove",this.s),document.removeEventListener("touchend",this.u),document.removeEventListener("touchcancel",this.u),this.M&&(this.M.parentNode.removeChild(this.M),this.M=null),this.k(this.i,this.p,this.l)},a.prototype.t=function(a){var b=this;if(i(a,this.q.identifier)!==!1){if(this.p=a,0===this.l){var c=1===a.touches.length;if(this.i.dragStartConditionOverride){try{c=this.i.dragStartConditionOverride(a)}catch(d){}if("boolean"!=typeof c)return}return c?(a.preventDefault(),a.stopImmediatePropagation(),this.h.preventDefault(),void this.A()):void this.L()}a.preventDefault(),a.stopImmediatePropagation(),l("client",a,this.H),l("page",this.p,this.I);var e=!1;if(this.i.dragImageTranslateOverride)try{if(e=this.i.dragImageTranslateOverride(this.H,this.m,function(a,c){b.M&&(b.I.x+=a,b.I.y+=c,o(b.M,b.I,b.K,b.i.dragImageCenterOnTouch))}))return}catch(d){}o(this.M,this.I,this.K,this.i.dragImageCenterOnTouch)}},a.prototype.v=function(a){if(i(a,this.q.identifier)!==!1){if(0===this.l)return void this.L();a.preventDefault(),a.stopImmediatePropagation(),this.l="touchcancel"===a.type?3:2}},a.prototype.P=function(){var a=this,b=this.B;this.C.g=3,this.J.dropEffect=y[0];var c=s("drag",this.j,this.p,this.C,this.J);if(c&&(this.B=y[0]),c||2===this.l||3===this.l){var d=this.R(this.l);if(d){var e=p(this.j,this.M,function(){a.S()});if(e)return}return void this.S()}var f=document.elementFromPoint(this.H.x,this.H.y),g=this.o;f!==this.m&&f!==this.o&&(this.m=f,null!==this.o&&(this.C.g=3,this.J.dropEffect=y[0],s("dragexit",this.o,this.p,this.C,this.J,!1)),null===this.m?this.o=this.m:(this.C.g=3,this.J.dropEffect=r(this.C.F,this.j),s("dragenter",this.m,this.p,this.C,this.J)?(this.o=this.m,this.B=t(this.J.effectAllowed,this.J.dropEffect)):this.m!==document.body&&(this.o=document.body))),g!==this.o&&h(g)&&(this.C.g=3,this.J.dropEffect=y[0],s("dragleave",g,this.p,this.C,this.J,!1,this.o)),h(this.o)&&(this.C.g=3,this.J.dropEffect=r(this.C.F,this.j),s("dragover",this.o,this.p,this.C,this.J)===!1?this.B=y[0]:this.B=t(this.J.effectAllowed,this.J.dropEffect)),b!==this.B&&this.M.classList.remove(A+b);var i=A+this.B;this.M.classList.contains(i)===!1&&this.M.classList.add(i)},a.prototype.R=function(a){var b=this.B===y[0]||null===this.o||3===a;return b?h(this.o)&&(this.C.g=3,this.J.dropEffect=y[0],s("dragleave",this.o,this.p,this.C,this.J,!1)):h(this.o)&&(this.C.g=1,this.J.dropEffect=this.B,s("drop",this.o,this.p,this.C,this.J)===!0?this.B=this.J.dropEffect:this.B=y[0]),b},a.prototype.S=function(){this.C.g=3,this.J.dropEffect=this.B,s("dragend",this.j,this.p,this.C,this.J,!1),this.l=2,this.L()},a}(),F=function(){function a(a,b){this.T=a,this.U=b,this.V=y[0]}return Object.defineProperty(a.prototype,"types",{get:function(){return 0!==this.T.g?Object.freeze(this.T.G):void 0},enumerable:!0,configurable:!0}),a.prototype.setData=function(a,b){if(2===this.T.g){if(a.indexOf(" ")>-1)throw new Error("illegal arg: type contains space");this.T.D[a]=b,-1===this.T.G.indexOf(a)&&this.T.G.push(a)}},a.prototype.getData=function(a){return 1===this.T.g||2===this.T.g?this.T.D[a]||"":void 0},a.prototype.clearData=function(a){if(2===this.T.g){if(a&&this.T.D[a]){delete this.T.D[a];var b=this.T.G.indexOf(a);return void(b>-1&&this.T.G.splice(b,1))}this.T.D={},this.T.G=[]}},a.prototype.setDragImage=function(a,b,c){2===this.T.g&&this.U(a,b,c)},Object.defineProperty(a.prototype,"effectAllowed",{get:function(){return this.T.F},set:function(a){2===this.T.g&&x.indexOf(a)>-1&&(this.T.F=a)},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"dropEffect",{get:function(){return this.V},set:function(a){0!==this.T.g&&x.indexOf(a)>-1&&(this.V=a)},enumerable:!0,configurable:!0}),a}()}(MobileDragAndDropPolyfill||(MobileDragAndDropPolyfill={}));
//# sourceMappingURL=mobile-drag-and-drop-polyfill.min.js.map