/*! drag-drop-webkit-mobile 2.0.0 | Copyright (c) 2016 Tim Ruffles | BSD 2 License */
var MobileDragAndDropPolyfill;!function(a){function b(){var a={dragEvents:"ondragstart"in document.documentElement,draggable:"draggable"in document.documentElement,isBlinkEngine:!!window.chrome||/chrome/i.test(navigator.userAgent),touchEvents:"ontouchstart"in document.documentElement,transitionEnd:"WebkitTransition"in document.documentElement.style?"webkitTransitionEnd":"transitionend",userAgentNotSupportingNativeDnD:!1};return a.userAgentNotSupportingNativeDnD=/iPad|iPhone|iPod|Android/.test(navigator.userAgent)||a.touchEvents&&x.isBlinkEngine,a}function c(a){x=b(),x.userAgentNotSupportingNativeDnD===!1&&x.draggable&&x.dragEvents||(a&&Object.keys(a).forEach(function(a){y[a]=y[a]}),document.addEventListener("touchstart",d))}function d(a){if(!z){var b=e(a);if(b){a.preventDefault();try{z=new H(a,y,b,f)}catch(c){throw f(a,3),c}}}}function e(a){var b=a.target;do if(b.draggable!==!1&&b.getAttribute&&"true"===b.getAttribute("draggable"))return b;while((b=b.parentNode)&&b!==document.body)}function f(a,b){z=null;var c=0===a.touches.length&&1===a.changedTouches.length;if(c&&0===b){var d,e=a.target,f=e.tagName;switch(f){case"INPUT":d=g(e.getAttribute("type"));case"SELECT":case"TEXTAREA":e.focus();break;default:d="click"}if(d){var h=k(e,a,d);e.dispatchEvent(h)}}}function g(a){switch(a){case"button":case"checkbox":case"radio":case"file":case"reset":case"submit":return"click"}}function h(a){return 0===a.length?0:a.reduce(function(a,b){return b+a},0)/a.length}function i(a){return a&&a.tagName}function j(a,b){for(var c=0;c<a.changedTouches.length;c++){var d=a.changedTouches[c];if(d.identifier===b)return!0}return!1}function k(a,b,c,d,e,f){void 0===d&&(d=!0),void 0===e&&(e=document.defaultView),void 0===f&&(f=null);var g=document.createEvent("MouseEvents"),h=b.changedTouches[0];g.initMouseEvent(c,!0,d,e,1,h.screenX,h.screenY,h.clientX,h.clientY,b.ctrlKey,b.altKey,b.shiftKey,b.metaKey,0,f);var i=a.getBoundingClientRect();return g.offsetX=g.clientX-i.left,g.offsetY=g.clientY-i.top,g}function l(a,b,c,d,e,f,g){void 0===g&&(g=null);var h=b.changedTouches[0],i=document.createEvent("Event");i.initEvent(c,!0,d),i.dataTransfer=f,i.relatedTarget=g,i.screenX=h.screenX,i.screenY=h.screenY,i.clientX=h.clientX,i.clientY=h.clientY;var j=a.getBoundingClientRect();return i.offsetX=i.clientX-j.left,i.offsetY=i.clientY-j.top,i}function m(a,b,c){for(var d=[],e=[],f=0;f<b.touches.length;f++){var g=b.touches[f];d.push(g[a+"X"]),e.push(g[a+"Y"])}c.x=h(d),c.y=h(e)}function n(a,b){if(1===a.nodeType){for(var c=window.getComputedStyle(a),d=0;d<c.length;d++){var e=c[d];b.style.setProperty(e,c.getPropertyValue(e),c.getPropertyPriority(e))}b.style.pointerEvents="none",b.removeAttribute("id"),b.removeAttribute("class"),b.removeAttribute("draggable")}if(a.hasChildNodes())for(var d=0;d<a.childNodes.length;d++)n(a.childNodes[d],b.childNodes[d])}function o(a){var b=a.cloneNode(!0);return n(a,b),b.style.position="absolute",b.style.left="0px",b.style.top="0px",b.style.zIndex="999999",b.classList.add(E),b.classList.add(G),b}function p(a,b,c,d){void 0===d&&(d=!0);var e=b.x,f=b.y;c&&(e+=c.x,f+=c.y),d&&(e-=parseInt(a.offsetWidth,10)/2,f-=parseInt(a.offsetHeight,10)/2);for(var g="translate3d("+e+"px,"+f+"px, 0)",h=0;h<C.length;h++){var i=C[h]+"transform";a.style[i]=g}}function q(a,b,c,d){var e=b.getBoundingClientRect(),f={x:e.left,y:e.top},g=s(0),h=s(1);f.x+=g,f.y+=h;var i=window.getComputedStyle(b,null),j=parseInt(i.getPropertyValue("padding-left"),10),k=parseInt(i.getPropertyValue("padding-top"),10);f.x-=j,f.y-=k,c.classList.add(F),p(c,f,void 0,!1),setTimeout(d,250)}function r(a,b,c){return c>a?-1:c>b-a?1:0}function s(a,b){var c=0===a?"scrollLeft":"scrollTop";return 1===arguments.length?document.body[c]||document.documentElement[c]:(document.documentElement[c]+=b,void(document.body[c]+=b))}function t(a,b){var c="scrollHeight",d="innerHeight",e=s(a);if(0===a&&(c="scrollWidth",d="innerWidth"),b>0){var f=document.body[c]||document.documentElement[c],g=window[d];return e+g>=f}return 0>b?0>=e:!0}function u(a,b){return a?a===A[0]?B[0]:0===a.indexOf(A[1])||a===A[7]?B[1]:0===a.indexOf(A[4])?B[3]:a===A[6]?B[2]:B[1]:3===b.nodeType&&"A"===b.tagName?B[3]:B[1]}function v(a,b,c,d,e,f,g){void 0===f&&(f=!0),void 0===g&&(g=null);var h=l(b,c,a,f,document.defaultView,e,g),i=!b.dispatchEvent(h);return d.g=0,i}function w(a,b){if(!a||a===A[7])return b;if(b===B[1]){if(0===a.indexOf(B[1]))return B[1]}else if(b===B[3]){if(0===a.indexOf(B[3])||a.indexOf("Link")>-1)return B[3]}else if(b===B[2]&&(0===a.indexOf(B[2])||a.indexOf("Move")>-1))return B[2];return B[0]}var x,y={iterationInterval:150,scrollThreshold:50,scrollVelocity:10};a.Initialize=c;var z,A=["none","copy","copyLink","copyMove","link","linkMove","move","all"],B=["none","copy","move","link"],C=["","-webkit-"],D="dnd-poly-",E=D+"drag-image",F=D+"snapback",G=D+"icon",H=function(){function a(a,b,c,d){this.h=b,this.i=c,this.j=d,this.k=0,this.l=null,this.m=null,this.o=a,this.p=a.changedTouches[0].identifier,this.q=this.s.bind(this),this.t=this.u.bind(this),document.addEventListener("touchmove",this.q),document.addEventListener("touchend",this.t),document.addEventListener("touchcancel",this.t)}return a.prototype.v=function(){var a=this;this.k=1,this.A=B[0],this.B={C:{},D:void 0,g:3,F:[]},this.G={x:null,y:null},this.H={x:null,y:null},this.I={x:0,y:0};var b=this.i;return this.J=new I(this.B,function(c,d,e){void 0===d&&(d=0),void 0===e&&(e=0),b=c,a.I.x=d,a.I.y=e}),this.B.g=2,this.J.dropEffect=B[0],v("dragstart",this.i,this.o,this.B,this.J)?(this.k=3,void this.K()):(m("page",this.o,this.H),this.L=o(b),document.body.appendChild(this.L),this.M={x:null,y:null},this.N=this.O.bind(this),void(this.P=setInterval(function(){a.R||(a.R=!0,a.S(),a.R=!1)},this.h.iterationInterval)))},a.prototype.K=function(){this.P&&(clearInterval(this.P),this.P=null),document.removeEventListener("touchmove",this.q),document.removeEventListener("touchend",this.t),document.removeEventListener("touchcancel",this.t),this.L&&(this.L.parentNode.removeChild(this.L),this.L=null),this.j(this.o,this.k)},a.prototype.s=function(a){if(j(a,this.p)!==!1){if(0===this.k)return a.touches.length>1?void this.K():(a.preventDefault(),a.stopImmediatePropagation(),void this.v());a.preventDefault(),a.stopImmediatePropagation(),this.o=a,m("client",a,this.G),m("page",this.o,this.H),this.M.x=r(this.G.x,window.innerWidth,this.h.scrollThreshold),this.M.y=r(this.G.y,window.innerHeight,this.h.scrollThreshold);var b=t(0,this.M.x),c=t(1,this.M.y);b&&c?p(this.L,this.H,this.I):this.T||(this.T=window.requestAnimationFrame(this.N))}},a.prototype.u=function(a){if(j(a,this.p)!==!1){if(this.M&&(this.M.x=this.M.y=0),this.o=a,0===this.k)return void this.K();a.preventDefault(),a.stopImmediatePropagation(),this.k="touchcancel"===a.type?3:2}},a.prototype.O=function(){var a=t(0,this.M.x),b=t(1,this.M.y);if(a&&b)return void(this.T=null);if(!a){var c=this.M.x*this.h.scrollVelocity;s(0,c),this.H.x+=c}if(!b){var d=this.M.y*this.h.scrollVelocity;s(1,d),this.H.y+=d}p(this.L,this.H,this.I),this.T=window.requestAnimationFrame(this.N)},a.prototype.S=function(){var a=this;this.B.g=3,this.J.dropEffect=B[0];var b=v("drag",this.i,this.o,this.B,this.J);if(b&&(this.A=B[0]),b||2===this.k||3===this.k){var c=this.U(this.k);if(c){var d=window.getComputedStyle(this.i,null),e=d.getPropertyValue("visibility"),f=d.getPropertyValue("display");return void("hidden"===e||"none"===f?this.V():q(x.transitionEnd,this.i,this.L,function(){a.V()}))}return void this.V()}var g=document.elementFromPoint(this.G.x,this.G.y),h=this.m;g!==this.l&&g!==this.m&&(this.l=g,null!==this.m&&(this.B.g=3,this.J.dropEffect=B[0],v("dragexit",this.m,this.o,this.B,this.J,!1)),null===this.l?this.m=this.l:(this.B.g=3,this.J.dropEffect=u(this.B.D,this.i),v("dragenter",this.l,this.o,this.B,this.J)?(this.m=this.l,this.A=w(this.J.effectAllowed,this.J.dropEffect)):this.l!==document.body&&(this.m=document.body))),h!==this.m&&i(h)&&(this.B.g=3,this.J.dropEffect=B[0],v("dragleave",h,this.o,this.B,this.J,!1,this.m)),i(this.m)&&(this.B.g=3,this.J.dropEffect=u(this.B.D,this.i),v("dragover",this.m,this.o,this.B,this.J)===!1?this.A=B[0]:this.A=w(this.J.effectAllowed,this.J.dropEffect));for(var j=0;j<B.length;j++)this.L.classList.remove(D+B[j]);this.L.classList.add(D+this.A)},a.prototype.U=function(a){var b=this.A===B[0]||null===this.m||3===a;return b?i(this.m)&&(this.B.g=3,this.J.dropEffect=B[0],v("dragleave",this.m,this.o,this.B,this.J,!1)):i(this.m)&&(this.B.g=1,this.J.dropEffect=this.A,v("drop",this.m,this.o,this.B,this.J)===!0?this.A=this.J.dropEffect:this.A=B[0]),b},a.prototype.V=function(){this.B.g=3,this.J.dropEffect=this.A,v("dragend",this.i,this.o,this.B,this.J,!1),this.k=2,this.K()},a}(),I=function(){function a(a,b){this.W=a,this.X=b,this.Y=B[0]}return Object.defineProperty(a.prototype,"files",{get:function(){return null},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"items",{get:function(){return null},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"types",{get:function(){return 0!==this.W.g?Object.freeze(this.W.F):void 0},enumerable:!0,configurable:!0}),a.prototype.setData=function(a,b){if(2===this.W.g){if(a.indexOf(" ")>-1)throw new Error("illegal arg: type contains space");this.W.C[a]=b,-1===this.W.F.indexOf(a)&&this.W.F.push(a)}},a.prototype.getData=function(a){return 1===this.W.g||2===this.W.g?this.W.C[a]||"":void 0},a.prototype.clearData=function(a){if(2===this.W.g){if(a&&this.W.C[a]){delete this.W.C[a];var b=this.W.F.indexOf(a);return void(b>-1&&this.W.F.splice(b,1))}this.W.C={},this.W.F=[]}},a.prototype.setDragImage=function(a,b,c){2===this.W.g&&this.X(a,b,c)},Object.defineProperty(a.prototype,"effectAllowed",{get:function(){return this.W.D},set:function(a){2===this.W.g&&A.indexOf(a)>-1&&(this.W.D=a)},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"dropEffect",{get:function(){return this.Y},set:function(a){0!==this.W.g&&A.indexOf(a)>-1&&(this.Y=a)},enumerable:!0,configurable:!0}),a}()}(MobileDragAndDropPolyfill||(MobileDragAndDropPolyfill={}));
//# sourceMappingURL=mobile-drag-and-drop-polyfill.min.js.map