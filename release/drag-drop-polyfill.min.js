/*! drag-drop-polyfill 2.0.1-as.0 | Copyright (c) 2017 Tim Ruffles | BSD 2 License */
var DEBUG,DragDropPolyfill;!function(a){function b(){var a={dragEvents:"ondragstart"in document.documentElement,draggable:"draggable"in document.documentElement,touchEvents:"ontouchstart"in document.documentElement,userAgentSupportingNativeDnD:void 0},b=!!window.chrome||/chrome/i.test(navigator.userAgent);return a.userAgentSupportingNativeDnD=!(/iPad|iPhone|iPod|Android/.test(navigator.userAgent)||b&&a.touchEvents),DEBUG&&Object.keys(a).forEach(function(a){}),a}function c(){var a=!1;try{var b=Object.defineProperty({},"passive",{get:function(){a=!0}});window.addEventListener("test",null,b)}catch(a){}return a}function d(a){if(a&&Object.keys(a).forEach(function(b){z[b]=a[b]}),!z.forceApply){var d=b();if(d.userAgentSupportingNativeDnD&&d.draggable&&d.dragEvents)return}y=c(),z.holdToDrag?j("touchstart",f(z.holdToDrag),!1):j("touchstart",e,!1)}function e(a){if(!A){var b=h(a);if(b)try{A=new I(a,z,b,i)}catch(b){throw i(z,a,3),b}}}function f(a){return function(b){var c=b.target,d=function(){i.off(),j.off(),k.off(),e(b)},f=function(){i.off(),j.off(),k.off(),clearTimeout(h)},h=setTimeout(d,a),i=g(c,"touchend",f,this),j=g(c,"touchcancel",f,this),k=g(window,"scroll",f,this)}}function g(a,b,c,d){return d&&(c=c.bind(d)),a.addEventListener(b,c),{off:function(){return a.removeEventListener(b,c)}}}function h(a){var b=a.target;do{if(!1!==b.draggable&&b.getAttribute&&"true"===b.getAttribute("draggable"))return b}while((b=b.parentNode)&&b!==document.body)}function i(a,b,c){if(0===c&&a.defaultActionOverride)try{a.defaultActionOverride(b),b.defaultPrevented}catch(a){}A=null}function j(a,b,c){void 0===c&&(c=!0),document.addEventListener(a,b,!!y&&{passive:c})}function k(a,b){document.removeEventListener(a,b)}function l(a){return 0===a.length?0:a.reduce(function(a,b){return b+a},0)/a.length}function m(a){return a&&a.tagName}function n(a,b){for(var c=0;c<a.changedTouches.length;c++){if(a.changedTouches[c].identifier===b)return!0}return!1}function o(a,b,c,d,e,f,g){void 0===g&&(g=null);var h=b.changedTouches[0],i=new Event(c,{bubbles:!0,cancelable:d});i.dataTransfer=f,i.relatedTarget=g,i.screenX=h.screenX,i.screenY=h.screenY,i.clientX=h.clientX,i.clientY=h.clientY,i.pageX=h.pageX,i.pageY=h.pageY;var j=a.getBoundingClientRect();return i.offsetX=i.clientX-j.left,i.offsetY=i.clientY-j.top,i}function p(a,b,c){for(var d=[],e=[],f=0;f<b.touches.length;f++){var g=b.touches[f];d.push(g[a+"X"]),e.push(g[a+"Y"])}c.x=l(d),c.y=l(e)}function q(a,b){if(1===a.nodeType){for(var c=getComputedStyle(a),d=0;d<c.length;d++){var e=c[d];b.style.setProperty(e,c.getPropertyValue(e),c.getPropertyPriority(e))}b.style.pointerEvents="none",b.removeAttribute("id"),b.removeAttribute("class"),b.removeAttribute("draggable")}if(a.hasChildNodes())for(var d=0;d<a.childNodes.length;d++)q(a.childNodes[d],b.childNodes[d])}function r(a){var b=a.cloneNode(!0);return q(a,b),b.style.position="absolute",b.style.left="0px",b.style.top="0px",b.style.zIndex="999999",b.classList.add(F),b.classList.add(H),b}function s(a){return D.map(function(b){var c=a.style[b+"transform"];return c&&"none"!==c?c.replace(/translate\(\D*\d+[^,]*,\D*\d+[^,]*\)\s*/g,""):""})}function t(a,b,c,d,e){void 0===e&&(e=!0);var f=b.x,g=b.y;d&&(f+=d.x,g+=d.y),e&&a&&(f-=parseInt(a.offsetWidth,10)/2,g-=parseInt(a.offsetHeight,10)/2);for(var h="translate3d("+f+"px,"+g+"px, 0)",i=0;i<D.length;i++){var j=D[i]+"transform";a.style[j]=h+" "+c[i]}}function u(a,b,c,d){var e=getComputedStyle(a);if("hidden"===e.visibility||"none"===e.display)return void d();var f=a.getBoundingClientRect(),g={x:f.left,y:f.top};g.x+=document.body.scrollLeft||document.documentElement.scrollLeft,g.y+=document.body.scrollTop||document.documentElement.scrollTop,g.x-=parseInt(e.marginLeft,10),g.y-=parseInt(e.marginTop,10),b.classList.add(G);var h=getComputedStyle(b),i=parseFloat(h.transitionDuration),j=parseFloat(h.transitionDelay),k=Math.round(1e3*(i+j));t(b,g,c,void 0,!1),setTimeout(d,k)}function v(a,b){return a?a===B[0]?C[0]:0===a.indexOf(B[1])||a===B[7]?C[1]:0===a.indexOf(B[4])?C[3]:a===B[6]?C[2]:C[1]:3===b.nodeType&&"A"===b.tagName?C[3]:C[1]}function w(a,b,c,d,e,f,g){if(void 0===f&&(f=!0),void 0===g&&(g=null),DEBUG){var h=E+"debug",i=E+"event-target",j=E+"event-related-target";b.classList.add(h),b.classList.add(i),g&&(g.classList.add(h),g.classList.add(j))}var k=o(b,c,a,f,document.defaultView,e,g),l=!b.dispatchEvent(k);return d.g=0,DEBUG&&(b.classList.remove(i),g&&g.classList.remove(j)),l}function x(a,b){if(!a||a===B[7])return b;if(b===C[1]){if(0===a.indexOf(C[1]))return C[1]}else if(b===C[3]){if(0===a.indexOf(C[3])||a.indexOf("Link")>-1)return C[3]}else if(b===C[2]&&(0===a.indexOf(C[2])||a.indexOf("Move")>-1))return C[2];return C[0]}var y,z={iterationInterval:150};a.Initialize=d;var A,B=["none","copy","copyLink","copyMove","link","linkMove","move","all"],C=["none","copy","move","link"],D=["","-webkit-"],E="dnd-poly-",F=E+"drag-image",G=E+"snapback",H=E+"icon",I=function(){function a(a,b,c,d){this.h=a,this.i=b,this.j=c,this.k=d,this.l=0,this.m=null,this.o=null,this.p=a,this.q=a.changedTouches[0],this.s=this.t.bind(this),this.u=this.v.bind(this),j("touchmove",this.s,!1),j("touchend",this.u,!1),j("touchcancel",this.u,!1)}return a.prototype.A=function(){var a=this;this.l=1,this.B=C[0],this.C={D:{},F:void 0,g:3,G:[]},this.H={x:null,y:null},this.I={x:null,y:null};var b=this.j;if(this.J=new J(this.C,function(c,d,e){b=c,"number"!=typeof d&&"number"!=typeof e||(a.K={x:d||0,y:e||0})}),this.C.g=2,this.J.dropEffect=C[0],w("dragstart",this.j,this.p,this.C,this.J))return this.l=3,this.L(),!1;if(p("page",this.p,this.I),this.M=r(b),this.N=s(this.M),!this.K)if(this.i.dragImageOffset)this.K={x:this.i.dragImageOffset.x,y:this.i.dragImageOffset.y};else if(this.i.dragImageCenterOnTouch){var c=getComputedStyle(b);this.K={x:0-parseInt(c.marginLeft,10),y:0-parseInt(c.marginTop,10)}}else{var d=b.getBoundingClientRect(),c=getComputedStyle(b);this.K={x:d.left-this.q.clientX-parseInt(c.marginLeft,10)+d.width/2,y:d.top-this.q.clientY-parseInt(c.marginTop,10)+d.height/2}}return t(this.M,this.I,this.N,this.K,this.i.dragImageCenterOnTouch),document.body.appendChild(this.M),this.O=setInterval(function(){a.P||(a.P=!0,a.R(),a.P=!1)},this.i.iterationInterval),!0},a.prototype.L=function(){this.O&&(clearInterval(this.O),this.O=null),k("touchmove",this.s),k("touchend",this.u),k("touchcancel",this.u),this.M&&(this.M.parentNode.removeChild(this.M),this.M=null),this.k(this.i,this.p,this.l)},a.prototype.t=function(a){var b=this;if(!1!==n(a,this.q.identifier)){if(this.p=a,0===this.l){var c=void 0;if(this.i.dragStartConditionOverride)try{c=this.i.dragStartConditionOverride(a)}catch(a){c=!1}else c=1===a.touches.length;return c?void(!0===this.A()&&(this.h.preventDefault(),a.preventDefault())):void this.L()}if(a.preventDefault(),p("client",a,this.H),p("page",a,this.I),this.i.dragImageTranslateOverride)try{var d=!1;if(this.i.dragImageTranslateOverride(a,{x:this.H.x,y:this.H.y},this.m,function(a,c){b.M&&(d=!0,b.H.x+=a,b.H.y+=c,b.I.x+=a,b.I.y+=c,t(b.M,b.I,b.N,b.K,b.i.dragImageCenterOnTouch))}),d)return}catch(a){}t(this.M,this.I,this.N,this.K,this.i.dragImageCenterOnTouch)}},a.prototype.v=function(a){if(!1!==n(a,this.q.identifier)){if(this.i.dragImageTranslateOverride)try{this.i.dragImageTranslateOverride(void 0,void 0,void 0,function(){})}catch(a){}if(0===this.l)return void this.L();a.preventDefault(),this.l="touchcancel"===a.type?3:2}},a.prototype.R=function(){var a=this;if(DEBUG)var b=E+"debug",c=E+"immediate-user-selection",d=E+"current-drop-target";var e=this.B;this.C.g=3,this.J.dropEffect=C[0];var f=w("drag",this.j,this.p,this.C,this.J);if(f&&(this.B=C[0]),f||2===this.l||3===this.l){return this.S(this.l)?void u(this.j,this.M,this.N,function(){a.T()}):void this.T()}var g=document.elementFromPoint(this.H.x,this.H.y),h=this.o;g!==this.m&&g!==this.o&&(DEBUG&&(this.m&&this.m.classList.remove(c),g&&(g.classList.add(b),g.classList.add(c))),this.m=g,null!==this.o&&(this.C.g=3,this.J.dropEffect=C[0],w("dragexit",this.o,this.p,this.C,this.J,!1)),null===this.m?this.o=this.m:(this.C.g=3,this.J.dropEffect=v(this.C.F,this.j),w("dragenter",this.m,this.p,this.C,this.J)?(this.o=this.m,this.B=x(this.J.effectAllowed,this.J.dropEffect)):this.m!==document.body&&(this.o=document.body))),h!==this.o&&m(h)&&(DEBUG&&h.classList.remove(d),this.C.g=3,this.J.dropEffect=C[0],w("dragleave",h,this.p,this.C,this.J,!1,this.o)),m(this.o)&&(DEBUG&&(this.o.classList.add(b),this.o.classList.add(d)),this.C.g=3,this.J.dropEffect=v(this.C.F,this.j),!1===w("dragover",this.o,this.p,this.C,this.J)?this.B=C[0]:this.B=x(this.J.effectAllowed,this.J.dropEffect)),e!==this.B&&this.M.classList.remove(E+e);var i=E+this.B;!1===this.M.classList.contains(i)&&this.M.classList.add(i)},a.prototype.S=function(a){if(DEBUG){var b=E+"immediate-user-selection",c=E+"current-drop-target";this.o&&this.o.classList.remove(c),this.m&&this.m.classList.remove(b)}var d=this.B===C[0]||null===this.o||3===a;return d?m(this.o)&&(this.C.g=3,this.J.dropEffect=C[0],w("dragleave",this.o,this.p,this.C,this.J,!1)):m(this.o)&&(this.C.g=1,this.J.dropEffect=this.B,!0===w("drop",this.o,this.p,this.C,this.J)?this.B=this.J.dropEffect:this.B=C[0]),d},a.prototype.T=function(){this.C.g=3,this.J.dropEffect=this.B,w("dragend",this.j,this.p,this.C,this.J,!1),this.l=2,this.L()},a}(),J=function(){function a(a,b){this.U=a,this.V=b,this.W=C[0]}return Object.defineProperty(a.prototype,"types",{get:function(){if(0!==this.U.g)return Object.freeze(this.U.G)},enumerable:!0,configurable:!0}),a.prototype.setData=function(a,b){if(2===this.U.g){if(a.indexOf(" ")>-1)throw new Error("illegal arg: type contains space");this.U.D[a]=b,-1===this.U.G.indexOf(a)&&this.U.G.push(a)}},a.prototype.getData=function(a){if(1===this.U.g||2===this.U.g)return this.U.D[a]||""},a.prototype.clearData=function(a){if(2===this.U.g){if(a&&this.U.D[a]){delete this.U.D[a];var b=this.U.G.indexOf(a);return void(b>-1&&this.U.G.splice(b,1))}this.U.D={},this.U.G=[]}},a.prototype.setDragImage=function(a,b,c){2===this.U.g&&this.V(a,b,c)},Object.defineProperty(a.prototype,"effectAllowed",{get:function(){return this.U.F},set:function(a){2===this.U.g&&B.indexOf(a)>-1&&(this.U.F=a)},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"dropEffect",{get:function(){return this.W},set:function(a){0!==this.U.g&&B.indexOf(a)>-1&&(this.W=a)},enumerable:!0,configurable:!0}),a}()}(DragDropPolyfill||(DragDropPolyfill={}));
//# sourceMappingURL=drag-drop-polyfill.min.js.map